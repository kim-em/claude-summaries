---
source_path: /Users/kim/projects/lean/mathlib4/Mathlib/Logic/Function
generated: 2026-01-25T18:45:00Z
git_sha: 542a7d7979ad5f45d2a89008412e565c8fa001d2
git_branch: nightly-testing
status: complete
files_count: 11
subdirs_count: 0
---

# Function

## Overview

The `Function/` directory contains comprehensive infrastructure for function properties and constructions in mathlib4. It provides definitions and extensive lemmas for core function properties (injectivity, surjectivity, bijectivity), function combinators (composition, swap, update, iteration), specialized predicates (fixed points, semiconjugation, commutativity, dependency), and advanced constructs (heterogeneous n-ary functions, fiber partitions, coequalization). This is foundational material used throughout mathlib, with both classical and constructive versions where applicable.

## Key Files

| File | Purpose |
|------|---------|
| Defs.lean | Core function definitions: `Bijective`, `Injective.beq_eq`, `IsFixedPt`, `flip`, dependent composition (`∘'`), `onFun` (notation `on`), `swap`, `Pi.map`; minimal imports for early availability |
| Basic.lean | Massive file (1101 lines) containing comprehensive function theory: injective/surjective/bijective lemmas and composition rules; `Function.eval`, `const`, `update` and its extensive API; `hfunext` for heterogeneous function extensionality; decidable equality via injection; surjective quantifier conversions (forall/exists); composition with injective/surjective functions; bijectivity of `Eq.rec`, `Eq.mp`, `Eq.mpr`, `cast`; imports from Logic.Basic, Set.Defs, ExistsUnique, Nonempty, Nontrivial |
| Iterate.lean | Function iteration `f^[n]` and its properties: `iterate_zero/succ/add/mul`, preservation of injective/surjective/bijective under iteration, `LeftInverse.iterate`, `RightInverse.iterate`, `Commute` structure for commuting functions with extensive iteration lemmas, `Semiconj` for semiconjugation, `Semiconj₂` for binary operations, `Iterate.rec` recursor, `iterate_fixed` for fixed points, `involutive_iff_iter_2_eq_id`; includes integration with `List.foldl/foldr` and `Pi.map` |
| Conjugate.lean | Semiconjugation and commutativity: `Semiconj f ga gb` (f ∘ ga = gb ∘ f), `Commute f g` (f ∘ g = g ∘ f as special case), `Semiconj₂` for binary operations; includes composition rules, inverse relations, `Option.map` preservation, associativity/idempotency transfer via semiconjugation |
| DependsOn.lean | Dependency predicate for multi-variable functions: `DependsOn f s` states f only depends on variables in set s (if x and y agree on s, then f x = f y); equivalent to `FactorsThrough f s.restrict`; includes monotonicity, constant functions depend on empty set, universe handling |
| FromTypes.lean | Heterogeneous n-ary functions via `FromTypes p τ` where `p : Fin n → Type u` specifies domain types: `FromTypes ![α, β] τ = α → β → τ`; provides `vecCons/vecHead/vecTail` manipulation, definitional equalities, equivalences for zero/nil/succ/cons cases, constant n-ary functions via `FromTypes.const` |
| OfArity.lean | Homogeneous n-ary functions `OfArity α β n = α → α → ... → β` (n times); implemented as abbreviation for `FromTypes (fun _ => α) β`; includes `OfArity.const` for n-ary constant functions, simplification lemmas for zero/succ cases, inhabited instances |
| Coequalizer.lean | Categorical coequalizer construction: `Coequalizer f g` as quotient by relation generated by `f x ~ g x`; provides `Coequalizer.mk` projection, `condition` lemma, `desc` for universal property (factoring maps through coequalizer), surjectivity of `mk` |
| CompTypeclasses.lean | Composability typeclasses for equivariant maps: `CompTriple φ ψ χ` expresses `ψ ∘ φ = χ`, `CompTriple.IsId φ` expresses `φ = id`; includes instances for identity compositions, composition with inverses, designed for equivariant linear map framework |
| FiberPartition.lean | Fiber-based partitions of functions: `Function.Fiber f` as indexing type for partition into preimages; provides `Fiber.image`, `Fiber.mk`, `Fiber.mkSelf`, `Fiber.preimage`, lemmas relating membership to image equality, nonemptiness of fibers; designed for condensed set adjunction |
| ULift.lean | Universe lifting utilities: `ULift.down_injective`, `ULift.down_inj`, `PLift.down_injective`, `PLift.down_inj`; establishes that projection from lifted types is injective |

## Subdirectories

None.

## Search Tags

function-theory injective surjective bijective composition iteration semiconjugate commute fixed-point update n-ary-functions heterogeneous-functions fiber coequalizer universe-lift depends-on function-properties mathlib lean4
