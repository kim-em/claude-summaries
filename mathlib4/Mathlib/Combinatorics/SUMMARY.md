---
source_path: /Users/kim/projects/lean/mathlib4/Mathlib/Combinatorics
generated: 2025-12-09T04:15:00Z
git_sha: 8427e48fbc3922ef6f581162121a110b53390490
git_branch: fix-deprecated-module-linter-public-import
status: complete
files_count: 7
subdirs_count: 13
---

# Combinatorics

## Overview

The `Combinatorics/` directory provides a comprehensive formalization of modern combinatorial mathematics, spanning foundational results in Ramsey theory, complete graph theory hierarchies, enumerative techniques, extremal methods, and structural combinatorics. The directory unifies classical counting arguments with sophisticated modern theories through a carefully architected collection of specialized subdirectories.

At the foundational level, the directory establishes core combinatorial tools: colexicographic ordering for finite sets (used in Kruskal-Katona), configuration theory for point-line incidences, Alon's combinatorial Nullstellensatz for polynomial zero-sum problems, and over 20 pigeonhole principle variants with weight functions and strict bounds. Major results include the Hales-Jewett theorem (coloring high-dimensional function spaces implies monochromatic combinatorial lines, which implies Van der Waerden), Hindman's theorem (finite colorings of semigroups contain sequences with all finite sums monochromatic, proved via idempotent ultrafilters on Stone-ƒåech compactification), and Schnirelmann density for additive combinatorics foundations.

The directory's architecture supports both classical and modern approaches: `Additive/` provides complete additive combinatorics with sumset theory (Cauchy-Davenport, Pl√ºnnecke-Ruzsa), structural theorems (Freiman homomorphisms), and Roth's theorem via the corners theorem using Szemer√©di's regularity; `Enumerative/` covers Bell numbers, Catalan numbers with bijections to binary trees, compositions, Dyck words, incidence algebras with M√∂bius inversion, and integer partitions with generating function theory; `SetFamily/` excels at extremal problems with compression methods and correlation inequalities (Kruskal-Katona, LYM/Sperner, Harris-Kleitman, Four Functions theorem generalizing FKG, Erd≈ës-Ko-Rado, VC-dimension theory); `SimpleGraph/` provides the most extensive graph theory including connectivity, bipartiteness, colorability with chromatic numbers, matchings via Tutte's theorem, strongly regular graphs, Szemer√©di's regularity lemma, Triangle Removal Lemma, and Tur√°n's theorem.

Additional specialized structures include: `Matroid/` for combinatorial independence with bases, circuits, closure, duality, rank functions (‚Ñï‚àû/finite/cardinal-valued), and minors; `Quiver/` for directed multigraphs with paths, arborescences, and covering maps (foundation for category theory); `Digraph/` for directed graphs as binary relations with complete Boolean algebra structure; `Graph/` for multigraphs with embedded set design; `Derangements/` proving D(n)/n! ‚Üí 1/e; `Hall/` for Marriage Theorem with compactness-based generalization removing finiteness constraints; `Extremal/` for Ruzsa-Szemer√©di problem on locally linear graphs with Œ©(n¬≤ * exp(-4 * ‚àö(log n))) lower bounds; `Optimization/` for general-valued constraint satisfaction with fractional polymorphism theory; and `Young/` for Young diagrams and semistandard tableaux in algebraic combinatorics.

## Key Files

| File | Purpose |
|------|---------|
| Colex.lean | Colexicographic (colex) order on finite sets: a binary-like ordering that avoids large values, with properties like linearity, decidability, monotonicity preservation, and equivalence to geometric sums for ‚Ñï; used in the Kruskal-Katona theorem |
| Configuration.lean | Abstract configurations of points and lines with nondegeneracy conditions; proves that HasLines, HasPoints, and \|P\| = \|L\| are mutually implying properties (any two imply the third) |
| HalesJewett.lean | Hales-Jewett theorem on combinatorial lines: any finite coloring of high-dimensional function space contains a monochromatic combinatorial line; includes multidimensional version for combinatorial subspaces and implies Van der Waerden's theorem |
| Hindman.lean | Hindman's theorem on finite sums: for any finite coloring of a semigroup, there exists a sequence such that all finite sums (without repetition) are monochromatic; uses idempotent ultrafilters on Stone-ƒåech compactification |
| Nullstellensatz.lean | Alon's combinatorial Nullstellensatz: gives combinatorial constraints for polynomial vanishing on Cartesian products of finite sets, with applications to zero-sum problems and combinatorial existence results |
| Pigeonhole.lean | Collection of 20+ pigeonhole principle variants: basic principle (more pigeons than holes implies collision), variations with weight functions, strict/non-strict inequalities, and bounds on pigeons per hole |
| Schnirelmann.lean | Schnirelmann density for sets of natural numbers: defined as inf_{n>0} \|A ‚à© {1,...,n}\| / n, with bounds and calculations; foundational for additive combinatorics |

## Subdirectories

- [x] `Additive/` - Additive combinatorics: comprehensive formalization combining sumset theory (Cauchy-Davenport lower bounds, Pl√ºnnecke-Ruzsa inequality relating doubling to higher powers, Ruzsa triangle inequality), structural theorems (Freiman homomorphisms preserving n-fold sums, approximate subgroups with bounded tripling, dissociation as additive independence, additive energy), classical results (Erd≈ës-Ginzburg-Ziv on zero-sum problems via Chevalley-Warning), and complete theory of 3-term arithmetic progressions with Roth's theorem proved via corners theorem using Szemer√©di's regularity lemma
- [x] `Derangements/` - Derangements (permutations without fixed points): defines derangements as `{ f : Perm Œ± | ‚àÄ x, f x ‚â† x }`, proves recursive decomposition equivalences via `Option Œ±` and sigma-types establishing `(n+1)*(D(n) + D(n+1))` recurrence, establishes cardinality formulas with summations over ascending factorials, and proves asymptotic result `numDerangements_tendsto_inv_e` showing D(n)/n! ‚Üí exp(-1) = 1/e via exponential power series
- [x] `Digraph/` - Directed graphs: formalized as binary relations `V ‚Üí V ‚Üí Prop` with self-loops allowed (unlike SimpleGraph); complete atomic Boolean algebra structure under subgraph relation with lattice operations (‚äî, ‚äì, ‚ä§, ‚ä•, complement); includes complete digraphs, complete bipartite digraphs, and orientation conversion functions `toSimpleGraphInclusive` (edge if either direction exists) and `toSimpleGraphStrict` (edge if both directions exist)
- [x] `Enumerative/` - Enumerative combinatorics: Bell numbers (refined/uniform/standard variants counting set partitions with recurrence relations), Catalan numbers (recursive definition, explicit formula `catalan n = centralBinom n / (n+1)`, bijection with binary trees), compositions (ordered partitions as `Composition n` with blocks and bijection to `CompositionAsSet` proving `2^(n-1)` count), double counting for bipartite graphs, Dyck words (balanced brackets with bijection to binary trees), incidence algebras on locally finite orders (zeta function, M√∂bius function as left inverse, inversion formulas, Euler characteristic), inclusion-exclusion principle with alternating sums, integer partitions with complete generating function theory including infinite product formulas, and Stirling numbers (first kind for permutation cycles, second kind for set partitions)
- [x] `Extremal/` - Extremal combinatorics: Ruzsa-Szemer√©di problem asking for maximum edges in locally linear graphs (each edge in exactly one triangle), defines Ruzsa-Szemer√©di number, proves construction from 3-arithmetic-progression-free sets using tripartite graphs from triangles, establishes lower bound Œ©(n¬≤ * exp(-4 * ‚àö(log n))) via Behrend's construction with connections to additive Roth numbers
- [x] `Graph/` - Multigraphs with vertices and edges as embedded sets (types `Œ±` and `Œ≤` with predicates for membership): defines `Graph Œ± Œ≤` structure with incidence predicates `IsLink` (edge connects two vertices), `Inc` (vertex-edge incidence), `Adj` (vertex adjacency); loop classification via `IsLoopAt` and `IsNonloopAt`; extensionality principles for graph equality; uses compact notation `V(G)` and `E(G)` for vertex/edge sets; design follows embedded-set pattern from matroid theory enabling natural subgraph and minor constructions
- [x] `Hall/` - Hall's Marriage Theorem: formalized in two versions with finite version (`Finite.lean`) for `Fintype Œπ` using strong induction on two cases (strict inequality vs. tight equality for some subset), and generalized version (`Basic.lean`) removing finiteness constraint via inverse limit compactness using `nonempty_sections_of_finite_inverse_system` from Tychonoff theorem; states that indexed families of finite sets admit systems of distinct representatives (injective selection functions) iff every k-union has at least k elements (Hall condition); includes three formulations via `Finset`, relations `SetRel Œ± Œ≤`, and `Finset.filter`
- [x] `Matroid/` - Matroid theory: comprehensive formalization of combinatorial independence structures unifying linear independence, graph acyclicity, and transversal theory; defined axiomatically via bases (maximal independent sets) following B-matroid definition generalizing to infinite ground sets via `‚Ñï‚àû`-valued `Set.encard` cardinality with equicardinality axioms; core API covers independence (`M.Indep`), bases (`M.IsBase`), circuits (minimal dependent sets with fundamental circuits and elimination), closure (combinatorial span with flat lattice), loops (in `M.closure ‚àÖ`) and coloops (in every base), duality via base complement (`M‚ú∂.IsBase B ‚Üî M.IsBase (M.E \ B)` with involutivity), maps (comap/map/embeddings/equivalences for morphisms and isomorphisms), direct sums (sigma/sum/disjoint variants), and elementary constructions (empty/loopy/free/uniqueBase); specialized subdirectories provide rank functions (‚Ñï‚àû-valued `eRank`/`eRk` as primary API with submodularity, finite-rank predicates enabling integer arithmetic, cardinal-valued for set-theoretic generality) and minor operations (deletion, contraction, restriction defining partial order and generalizing graph minors to abstract setting)
- [x] `Optimization/` - General-valued constraint satisfaction problems (VCSP): template-based framework for discrete optimization generalizing Min-Cost-Hom (including 3-SAT) and Finite-Valued CSP; defines VCSP templates as sets of cost functions D^n ‚Üí C over domain D and value C, terms as instantiated cost functions with variable assignments, instances as multisets of terms, solution evaluation as sum of term costs, optimality criterion as minimum over all solutions; includes max-cut property characterization for binary functions (argmin exactly at two complementary labelings), fractional operations (multisets of operations D^m ‚Üí D), and fractional polymorphism theory proving max-cut functions forbid symmetric fractional polymorphisms
- [x] `Quiver/` - Quivers (directed multigraphs) as foundation for category theory: defines `Quiver V` typeclass assigning arrow types `a ‚ü∂ b` to each vertex pair, very permissive notion allowing multiple edges; includes inductive path type `Path a b` for composable arrow sequences with composition/length/decomposition, prefunctors (`Prefunctor V W` with object/arrow maps extending to categorical functors, notation `V ‚•§q W`), arborescences (directed rooted trees with unique paths via `Arborescence V` typeclass and `geodesicSubtree` construction), weak/strong connectivity (via zigzag quotient and bidirectional reachability), symmetrization (`Symmetrify V` adding formal inverses as sum types, `HasReverse`/`HasInvolutiveReverse` typeclasses, path reversal), covering maps (star/costar bijections with unique path lifting), subquivers (wide/total with lattice operations), reflexive quivers with identities, push-forward via functions, single-object quivers from monoids; `Path/` subdirectory adds boundary-crossing decomposition, vertex operations along paths, and weight computations (multiplicative/additive measures for ordered semirings)
- [x] `SetFamily/` - Families of finite sets with extremal combinatorics focus: shadow theory (‚àÇùíú removing elements, ‚àÇ‚Å∫ùíú adding elements, measuring family boundaries, iterated shadows), Kruskal-Katona theorem (minimum shadow achieved by colex initial segments with iterated version and Lovasz formulation, culminating in Erd≈ës-Ko-Rado theorem on maximum r-uniform intersecting families when r ‚â§ n/2), LYM inequality and Sperner's theorem (local LYM on shadow proportions, global LYM with sum of layer densities ‚â§ 1 for antichains, Sperner's theorem with maximum antichain size (n choose n/2)), Harris-Kleitman inequality (correlation of lower/upper sets in uniform measure), Ahlswede-Zhang identity (sharpening LYM with explicit correction term), Four Functions theorem (Ahlswede-Daykin inequality generalizing Daykin, Holley, FKG, and Marica-Sch√∂nheim via Birkhoff representation), intersecting families (pairwise non-disjoint with maximality and size bounds), Kleitman's bound (k intersecting families cover at most 2^n - 2^(n-k) sets), VC-dimension theory (shattering with Pajor and Sauer-Shelah lemmas, compression preservation, connection to statistical learning); `Compression/` subdirectory provides down-compression and UV-compression as cardinality-preserving shadow-reducing operations
- [x] `SimpleGraph/` - Simple graphs (undirected graphs without loops or multiple edges): defined as irreflexive symmetric relations on vertex type, forming complete atomic Boolean algebra under subgraph ordering; comprehensive theory spanning foundational structures (adjacency matrices with matrix powers counting walks, subgraphs with spanning/induced variants and lattice instances, walks/trails/paths with composition and induction principles), connectivity properties (reachability as equivalence relation, connected components, bridges, cut vertices via `Connectivity/` subdirectory), characterization properties (bipartiteness equivalent to 2-colorability with double-counting degree sums, colorability with `chromaticNumber` as ‚Ñï‚àû-valued minimum, matchings with perfect/alternating variants and Tutte's theorem stating perfect matching existence iff no Tutte violators, cliques with enumeration and clique-free predicates), graph operations (products/maps/complements/sums), structural characterizations (Hamiltonian paths/cycles visiting every vertex exactly once, strongly regular graphs with parameters n/k/‚Ñì/Œº and matrix equation A¬≤=kI+‚ÑìA+ŒºC), and landmark results including Szemer√©di's regularity lemma for pseudorandom behavior (`Regularity/`), Triangle Removal Lemma (`Triangle/`), and Tur√°n's theorem on extremal numbers (`Extremal/`); specialized subdirectories provide graph ends capturing infinite directions (`Ends/`) and comprehensive walk theory foundations (`Walks/`)
- [x] `Young/` - Young diagrams and semistandard tableaux for algebraic combinatorics and representation theory: defines Young diagrams as finite lower sets in ‚Ñï √ó ‚Ñï grid with up-left justification, provides distributive lattice structure (sup/inf/bot operations), transpose as order isomorphism, row/column accessor functions with monotonicity properties, equivalence between diagrams and sorted lists of row lengths (weakly decreasing positive naturals); defines semistandard Young tableaux (SSYTs) as functions ‚Ñï ‚Üí ‚Ñï ‚Üí ‚Ñï filling Young diagrams with weakly increasing rows and strictly increasing columns, includes "highest weight" tableau where row i contains all i's as canonical example

## Search Tags

combinatorics ramsey-theory graph-theory enumeration colex colexicographic-order hales-jewett hindman ultrafilter nullstellensatz pigeonhole schnirelmann-density configuration matroid quiver set-family simple-graph young-tableau derangement extremal-combinatorics additive-combinatorics van-der-waerden
